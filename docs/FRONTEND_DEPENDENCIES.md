# å‰ç«¯ä¾èµ–è¯´æ˜

## ğŸ“¦ å®Œæ•´ä¾èµ–åˆ—è¡¨

### ç”Ÿäº§ä¾èµ– (dependencies)

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” | çŠ¶æ€ |
|------|------|------|------|
| vue | ^3.5.13 | Vue 3 æ ¸å¿ƒæ¡†æ¶ | âœ… å·²é…ç½® |
| vue-router | ^4.5.0 | Vue è·¯ç”±ç®¡ç† | âœ… å·²é…ç½® |
| ant-design-vue | ^4.2.6 | UI ç»„ä»¶åº“ | âœ… å·²é…ç½® |
| axios | ^1.7.9 | HTTP å®¢æˆ·ç«¯ | âœ… å·²é…ç½® |
| @supabase/supabase-js | ^2.76.1 | Supabase å®¢æˆ·ç«¯ | âœ… å·²é…ç½® |
| @amap/amap-jsapi-loader | ^1.0.1 | é«˜å¾·åœ°å›¾ JS API åŠ è½½å™¨ | âœ… å·²é…ç½® |
| dayjs | ^1.11.19 | æ—¥æœŸæ—¶é—´å¤„ç† | âœ… å·²é…ç½® |
| html2canvas | ^1.4.1 | HTML è½¬ Canvasï¼ˆæˆªå›¾ï¼‰ | âœ… å·²é…ç½® |
| jspdf | ^3.0.3 | PDF ç”Ÿæˆ | âœ… å·²é…ç½® |

### å¼€å‘ä¾èµ– (devDependencies)

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” | çŠ¶æ€ |
|------|------|------|------|
| vite | ^6.0.7 | æ„å»ºå·¥å…· | âœ… å·²é…ç½® |
| @vitejs/plugin-vue | ^5.2.1 | Vite Vue æ’ä»¶ | âœ… å·²é…ç½® |
| typescript | ^5.7.3 | TypeScript ç¼–è¯‘å™¨ | âœ… å·²é…ç½® |
| vue-tsc | ^2.2.0 | Vue TypeScript ç±»å‹æ£€æŸ¥ | âœ… å·²é…ç½® |
| @types/node | ^22.10.5 | Node.js ç±»å‹å®šä¹‰ | âœ… å·²é…ç½® |

## ğŸ“Š ä¾èµ–ç”¨é€”è¯¦è§£

### æ ¸å¿ƒæ¡†æ¶
- **vue**: Vue 3 æ ¸å¿ƒæ¡†æ¶ï¼Œæä¾›å“åº”å¼æ•°æ®å’Œç»„ä»¶ç³»ç»Ÿ
- **vue-router**: å•é¡µåº”ç”¨è·¯ç”±ç®¡ç†

### UI å’Œæ ·å¼
- **ant-design-vue**: ä¼ä¸šçº§ UI ç»„ä»¶åº“ï¼Œæä¾›ä¸°å¯Œçš„ç»„ä»¶
  - ä½¿ç”¨çš„ç»„ä»¶ï¼šButton, Form, Input, DatePicker, Select, Card, Message, Modal ç­‰

### æ•°æ®é€šä¿¡
- **axios**: HTTP å®¢æˆ·ç«¯ï¼Œç”¨äº API è¯·æ±‚
- **@supabase/supabase-js**: Supabase å®¢æˆ·ç«¯ï¼Œç”¨äºè®¤è¯å’Œæ•°æ®åº“æ“ä½œ

### åœ°å›¾åŠŸèƒ½
- **@amap/amap-jsapi-loader**: é«˜å¾·åœ°å›¾ JS API åŠ è½½å™¨
  - ç”¨äºåœ¨ç»“æœé¡µé¢æ˜¾ç¤ºåœ°å›¾å’Œæ ‡è®°

### å·¥å…·åº“
- **dayjs**: è½»é‡çº§æ—¥æœŸæ—¶é—´å¤„ç†åº“
  - ç”¨äºæ—¥æœŸæ ¼å¼åŒ–å’Œè®¡ç®—
- **html2canvas**: å°† HTML å…ƒç´ è½¬æ¢ä¸º Canvas
  - ç”¨äºç”Ÿæˆæ—…è¡Œè®¡åˆ’æˆªå›¾
- **jspdf**: ç”Ÿæˆ PDF æ–‡ä»¶
  - ç”¨äºå¯¼å‡ºæ—…è¡Œè®¡åˆ’ä¸º PDF

### å¼€å‘å·¥å…·
- **vite**: ç°ä»£åŒ–çš„å‰ç«¯æ„å»ºå·¥å…·
- **@vitejs/plugin-vue**: Vite çš„ Vue 3 æ’ä»¶
- **typescript**: TypeScript ç¼–è¯‘å™¨
- **vue-tsc**: Vue æ–‡ä»¶çš„ TypeScript ç±»å‹æ£€æŸ¥
- **@types/node**: Node.js çš„ TypeScript ç±»å‹å®šä¹‰

## ğŸ” ä¾èµ–æ£€æŸ¥

### è‡ªåŠ¨æ£€æŸ¥è„šæœ¬

è¿è¡Œä¾èµ–æ£€æŸ¥è„šæœ¬ï¼š

```bash
cd frontend
node check-dependencies.js
```

**è¾“å‡ºç¤ºä¾‹**ï¼ˆæ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼‰ï¼š
```
============================================================
ğŸ” æ£€æŸ¥å‰ç«¯ npm ä¾èµ–åŒ…
============================================================

ğŸ“¦ æ£€æŸ¥ç”Ÿäº§ä¾èµ–:
------------------------------------------------------------
âœ… vue                          v3.5.13
âœ… vue-router                   v4.5.0
âœ… ant-design-vue               v4.2.6
âœ… axios                        v1.7.9
âœ… @supabase/supabase-js        v2.76.1
âœ… @amap/amap-jsapi-loader      v1.0.1
âœ… dayjs                        v1.11.19
âœ… html2canvas                  v1.4.1
âœ… jspdf                        v3.0.3

------------------------------------------------------------

ğŸ› ï¸  æ£€æŸ¥å¼€å‘ä¾èµ–:
------------------------------------------------------------
âœ… vite                         v6.0.7
âœ… @vitejs/plugin-vue           v5.2.1
âœ… typescript                   v5.7.3
âœ… vue-tsc                      v2.2.0
âœ… @types/node                  v22.10.5

============================================================
ğŸ“Š ç»Ÿè®¡ä¿¡æ¯:
   æ€»è®¡: 14 ä¸ªåŒ…
   å·²å®‰è£…: 14 ä¸ªåŒ…
   ç¼ºå¤±: 0 ä¸ªåŒ…

âœ… æ‰€æœ‰å¿…éœ€çš„åŒ…éƒ½å·²å®‰è£…ï¼

============================================================
```

### æ‰‹åŠ¨æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰å·²å®‰è£…çš„åŒ…
npm list --depth=0

# æ£€æŸ¥ç‰¹å®šåŒ…
npm list vue
npm list ant-design-vue
npm list axios

# æ£€æŸ¥è¿‡æ—¶çš„åŒ…
npm outdated
```

## ğŸ“¥ å®‰è£…ä¾èµ–

### æ–¹å¼ 1: ä½¿ç”¨ npm installï¼ˆæ¨èï¼‰

```bash
cd frontend
npm install
```

### æ–¹å¼ 2: ä½¿ç”¨ npm ciï¼ˆCI/CD ç¯å¢ƒï¼‰

```bash
cd frontend
npm ci
```

**åŒºåˆ«**:
- `npm install`: ä¼šæ›´æ–° `package-lock.json`ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ
- `npm ci`: ä¸¥æ ¼æŒ‰ç…§ `package-lock.json` å®‰è£…ï¼Œé€‚åˆ CI/CD å’Œç”Ÿäº§ç¯å¢ƒ

### æ–¹å¼ 3: æ‰‹åŠ¨å®‰è£…

```bash
# ç”Ÿäº§ä¾èµ–
npm install vue@^3.5.13
npm install vue-router@^4.5.0
npm install ant-design-vue@^4.2.6
npm install axios@^1.7.9
npm install @supabase/supabase-js@^2.76.1
npm install @amap/amap-jsapi-loader@^1.0.1
npm install dayjs@^1.11.19
npm install html2canvas@^1.4.1
npm install jspdf@^3.0.3

# å¼€å‘ä¾èµ–
npm install -D vite@^6.0.7
npm install -D @vitejs/plugin-vue@^5.2.1
npm install -D typescript@^5.7.3
npm install -D vue-tsc@^2.2.0
npm install -D @types/node@^22.10.5
```

## ğŸ³ Docker æ„å»ºéªŒè¯

### Dockerfile åˆ†æ

```dockerfile
# é˜¶æ®µ1: æ„å»º
FROM node:18-alpine AS builder

WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨ npm ci ç¡®ä¿ä¸€è‡´æ€§ï¼‰
RUN npm ci

# å¤åˆ¶æºä»£ç 
COPY . .

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV VITE_API_BASE_URL=http://localhost:8000
ENV VITE_SUPABASE_URL=placeholder
ENV VITE_SUPABASE_ANON_KEY=placeholder

# æ„å»ºï¼ˆè·³è¿‡ç±»å‹æ£€æŸ¥ä»¥åŠ å¿«é€Ÿåº¦ï¼‰
RUN npm run build:docker

# é˜¶æ®µ2: ç”Ÿäº§ç¯å¢ƒ
FROM nginx:alpine

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/dist /usr/share/nginx/html

# å¤åˆ¶ nginx é…ç½®
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

### æœ¬åœ°æµ‹è¯• Docker æ„å»º

```bash
# æ„å»ºé•œåƒ
cd frontend
docker build -t frontend-test .

# è¿è¡Œå®¹å™¨
docker run -p 80:80 frontend-test

# åœ¨æµè§ˆå™¨è®¿é—®
open http://localhost
```

### éªŒè¯æ„å»ºäº§ç‰©

```bash
# è¿›å…¥æ„å»ºé˜¶æ®µçš„å®¹å™¨
docker build --target builder -t frontend-builder .
docker run -it frontend-builder sh

# åœ¨å®¹å™¨å†…æ£€æŸ¥
ls -la /app/dist
cat /app/dist/index.html
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: npm install å¤±è´¥

**é—®é¢˜**: æŸäº›åŒ…å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules å’Œ package-lock.json
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### Q2: Docker æ„å»ºæ—¶ä¾èµ–å®‰è£…å¤±è´¥

**é—®é¢˜**: Docker æ„å»ºè¿‡ç¨‹ä¸­ npm ci å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

1. ç¡®ä¿ `package-lock.json` å­˜åœ¨ä¸”æ˜¯æœ€æ–°çš„ï¼š
```bash
npm install
git add package-lock.json
git commit -m "chore: update package-lock.json"
```

2. åœ¨ Dockerfile ä¸­å¢åŠ è¶…æ—¶æ—¶é—´ï¼š
```dockerfile
RUN npm ci --timeout=60000
```

3. ä½¿ç”¨å›½å†…é•œåƒï¼ˆå¯é€‰ï¼‰ï¼š
```dockerfile
RUN npm config set registry https://registry.npmmirror.com
RUN npm ci
```

### Q3: ç±»å‹æ£€æŸ¥å¤±è´¥

**é—®é¢˜**: `npm run build` æ—¶ TypeScript ç±»å‹æ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

1. ä½¿ç”¨ `build:docker` è„šæœ¬è·³è¿‡ç±»å‹æ£€æŸ¥ï¼š
```bash
npm run build:docker
```

2. æˆ–è€…ä¿®å¤ç±»å‹é”™è¯¯ï¼š
```bash
# è¿è¡Œç±»å‹æ£€æŸ¥
npm run vue-tsc --noEmit

# æŸ¥çœ‹é”™è¯¯å¹¶ä¿®å¤
```

### Q4: Vite æ„å»ºå¤±è´¥

**é—®é¢˜**: Vite æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼š
```bash
node --version  # åº”è¯¥æ˜¯ 18.x æˆ–æ›´é«˜
```

2. æ¸…ç†æ„å»ºç¼“å­˜ï¼š
```bash
rm -rf node_modules/.vite
npm run build:docker
```

3. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š
```bash
# ç¡®ä¿å¿…è¦çš„ç¯å¢ƒå˜é‡å·²è®¾ç½®
echo $VITE_API_BASE_URL
echo $VITE_SUPABASE_URL
```

## ğŸ“Š ä¾èµ–å…³ç³»å›¾

```
AI Travel Planner Frontend
â”‚
â”œâ”€â”€ æ ¸å¿ƒæ¡†æ¶
â”‚   â”œâ”€â”€ vue (æ ¸å¿ƒ)
â”‚   â””â”€â”€ vue-router (è·¯ç”±)
â”‚
â”œâ”€â”€ UI ç»„ä»¶
â”‚   â””â”€â”€ ant-design-vue
â”‚       â”œâ”€â”€ Button
â”‚       â”œâ”€â”€ Form
â”‚       â”œâ”€â”€ Input
â”‚       â”œâ”€â”€ DatePicker
â”‚       â”œâ”€â”€ Select
â”‚       â”œâ”€â”€ Card
â”‚       â”œâ”€â”€ Message
â”‚       â””â”€â”€ Modal
â”‚
â”œâ”€â”€ æ•°æ®é€šä¿¡
â”‚   â”œâ”€â”€ axios (HTTP)
â”‚   â””â”€â”€ @supabase/supabase-js (è®¤è¯/æ•°æ®åº“)
â”‚
â”œâ”€â”€ åœ°å›¾åŠŸèƒ½
â”‚   â””â”€â”€ @amap/amap-jsapi-loader
â”‚
â”œâ”€â”€ å·¥å…·åº“
â”‚   â”œâ”€â”€ dayjs (æ—¥æœŸæ—¶é—´)
â”‚   â”œâ”€â”€ html2canvas (æˆªå›¾)
â”‚   â””â”€â”€ jspdf (PDF ç”Ÿæˆ)
â”‚
â””â”€â”€ å¼€å‘å·¥å…·
    â”œâ”€â”€ vite (æ„å»º)
    â”œâ”€â”€ @vitejs/plugin-vue (Vue æ’ä»¶)
    â”œâ”€â”€ typescript (ç±»å‹æ£€æŸ¥)
    â”œâ”€â”€ vue-tsc (Vue ç±»å‹æ£€æŸ¥)
    â””â”€â”€ @types/node (Node ç±»å‹)
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ package-lock.json

```bash
# å§‹ç»ˆæäº¤ package-lock.json
git add package-lock.json
git commit -m "chore: update dependencies"
```

### 2. å®šæœŸæ›´æ–°ä¾èµ–

```bash
# æ£€æŸ¥è¿‡æ—¶çš„åŒ…
npm outdated

# æ›´æ–°æ‰€æœ‰åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬
npm update

# æ›´æ–°ç‰¹å®šåŒ…
npm update vue
```

### 3. ä½¿ç”¨ npm ci åœ¨ CI/CD ä¸­

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Install dependencies
  run: npm ci
  working-directory: frontend
```

### 4. é”å®šä¾èµ–ç‰ˆæœ¬

åœ¨ `package.json` ä¸­ä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š
```json
{
  "dependencies": {
    "vue": "3.5.13",  // ç²¾ç¡®ç‰ˆæœ¬
    "axios": "^1.7.9"  // å…¼å®¹ç‰ˆæœ¬
  }
}
```

## ğŸ“ package.json è„šæœ¬è¯´æ˜

```json
{
  "scripts": {
    "dev": "vite",                    // å¼€å‘æœåŠ¡å™¨
    "build": "vue-tsc && vite build", // å®Œæ•´æ„å»ºï¼ˆå«ç±»å‹æ£€æŸ¥ï¼‰
    "build:docker": "vite build",     // Docker æ„å»ºï¼ˆè·³è¿‡ç±»å‹æ£€æŸ¥ï¼‰
    "preview": "vite preview"         // é¢„è§ˆæ„å»ºç»“æœ
  }
}
```

### ä½¿ç”¨åœºæ™¯

- **dev**: æœ¬åœ°å¼€å‘
- **build**: ç”Ÿäº§æ„å»ºï¼ˆæœ¬åœ°ï¼‰
- **build:docker**: Docker æ„å»ºï¼ˆCI/CDï¼‰
- **preview**: é¢„è§ˆæ„å»ºç»“æœ

## âœ… ä¾èµ–å®Œæ•´æ€§æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ç”Ÿäº§ä¾èµ–å·²å®‰è£…
- [ ] æ‰€æœ‰å¼€å‘ä¾èµ–å·²å®‰è£…
- [ ] package-lock.json å­˜åœ¨ä¸”æœ€æ–°
- [ ] æœ¬åœ°æ„å»ºæˆåŠŸ (`npm run build`)
- [ ] Docker æ„å»ºæˆåŠŸ (`docker build`)
- [ ] è¿è¡Œæ—¶æ— ä¾èµ–é”™è¯¯
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [Vite æ–‡æ¡£](https://vitejs.dev/)
- [Ant Design Vue æ–‡æ¡£](https://antdv.com/)
- [Axios æ–‡æ¡£](https://axios-http.com/)
- [Supabase æ–‡æ¡£](https://supabase.com/docs)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.4  
**æœ€åæ›´æ–°**: 2025-11-10  
**ç»´æŠ¤è€…**: AI Travel Planner Team

## ğŸ‰ æ€»ç»“

### ä¾èµ–çŠ¶æ€
âœ… æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®é…ç½®  
âœ… package.json å®Œæ•´  
âœ… package-lock.json å­˜åœ¨  
âœ… Dockerfile é…ç½®æ­£ç¡®  
âœ… æ„å»ºè„šæœ¬å®Œå–„  

### éªŒè¯æ–¹æ³•
```bash
# 1. æ£€æŸ¥ä¾èµ–
node check-dependencies.js

# 2. æœ¬åœ°æ„å»º
npm run build:docker

# 3. Docker æ„å»º
docker build -t frontend-test .

# 4. è¿è¡Œæµ‹è¯•
docker run -p 80:80 frontend-test
```

### ç»“è®º
å‰ç«¯ä¾èµ–é…ç½®å®Œæ•´ï¼ŒDocker é•œåƒå¯ä»¥æ­£å¸¸æ„å»ºå’Œè¿è¡Œï¼
